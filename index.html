<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>STRATOS | WAR DRUMS EDITION</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="//unpkg.com/globe.gl"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=JetBrains+Mono:wght@300;800&display=swap" rel="stylesheet">
    <style>
        :root { --neon: #00f2ff; --danger: #ff003c; --bg: #000507; }
        body { background: var(--bg); color: var(--neon); font-family: 'JetBrains Mono', monospace; overflow: hidden; margin: 0; }
        #globeViz { position: absolute; top: 0; z-index: 1; opacity: 0.25; }
        .hud { position: relative; z-index: 100; height: 100vh; display: flex; flex-direction: column; padding: 10px; pointer-events: none; }
        .interactive { pointer-events: auto !important; }
        .terminal { background: rgba(0, 8, 12, 0.96); border: 1px solid rgba(0, 242, 255, 0.3); backdrop-filter: blur(10px); }
        .bar-wrap { height: 6px; background: rgba(255,255,255,0.05); margin: 4px 0 10px 0; display: flex; }
        .bar-a { height: 100%; background: var(--neon); box-shadow: 0 0 10px var(--neon); transition: width 1s; }
        .bar-b { height: 100%; background: var(--danger); box-shadow: 0 0 10px var(--danger); transition: width 1s; }
        .ai-report { height: 380px; overflow-y: auto; padding: 15px; font-size: 10px; scrollbar-width: none; border-left: 2px solid var(--neon); }
        select { background: #000; border: 1px solid var(--neon); color: white; padding: 8px; width: 100%; font-size: 11px; }
        .win-tag { font-family: 'Orbitron'; font-size: 28px; color: #4ade80; text-shadow: 0 0 15px #4ade80; font-weight: 900; }
        .pulse { animation: pulse-red 2s infinite; }
        @keyframes pulse-red { 0% { opacity: 1; } 50% { opacity: 0.5; } 100% { opacity: 1; } }
    </style>
</head>
<body>

<div id="globeViz"></div>

<div class="hud">
    <header class="interactive terminal p-4 flex justify-between items-center border-b border-cyan-500">
        <div>
            <h1 class="font-orbitron text-[10px] font-black tracking-widest text-white">STRATOS // ACOUSTIC WARFARE</h1>
            <p class="text-[7px] text-cyan-400">AUDIO ENGINE: WAR DRUMS V1 // DATABASE 2026</p>
        </div>
        <div id="clock" class="text-xs font-bold pulse">00:00:00</div>
    </header>

    <main class="flex-1 flex flex-col justify-end">
        <div class="interactive terminal p-6 w-full max-w-5xl mx-auto border-t-2 border-cyan-500">
            <div class="grid grid-cols-2 gap-4 mb-4">
                <select id="p1" onchange="focusCountry('p1')"></select>
                <select id="p2" onchange="focusCountry('p2')"></select>
            </div>

            <div class="ai-report" id="ai-output">
                <p class="opacity-40 text-center mt-20 font-bold uppercase tracking-widest">> SISTEMA DE ÁUDIO PRONTO. INICIE A SIMULAÇÃO.</p>
            </div>

            <button class="w-full bg-red-700 hover:bg-white hover:text-black text-white font-orbitron py-5 mt-2 interactive transition-all font-black tracking-[5px]" onclick="runSim()">INICIAR ATAQUE</button>
        </div>
    </main>
</div>

<script>
    // ENGINE DE ÁUDIO ESTRATÉGICO (Sintetizador de Guerra)
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    
    function playWarDrum(time) {
        // Som de bumbo industrial grave
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = 'sine';
        osc.frequency.setValueAtTime(150, time);
        osc.frequency.exponentialRampToValueAtTime(0.01, time + 0.5);
        gain.gain.setValueAtTime(0.5, time);
        gain.gain.exponentialRampToValueAtTime(0.01, time + 0.5);
        osc.connect(gain); gain.connect(audioCtx.destination);
        osc.start(time); osc.stop(time + 0.5);
    }

    function playMusic() {
        const now = audioCtx.currentTime;
        // Ritmo de marcha (Tum... Tum... Tum-Tum...)
        for(let i=0; i<4; i++) {
            playWarDrum(now + i*0.8);
            if(i === 2) playWarDrum(now + i*0.8 + 0.4);
        }
    }

    const db = {
        usa: { n: "EUA", pwr: 100, army: 1390000, air: 13200, navy: 484, tanks: 5500, nuke: 5044, carrier: 11, lat: 38, lng: -97, doc: "Domínio Global e Tecnologia Stealth." },
        china: { n: "China", pwr: 98, army: 2035000, air: 3300, navy: 730, tanks: 4950, nuke: 500, carrier: 3, lat: 35, lng: 103, doc: "Saturação de mísseis e marinha numérica." },
        russia: { n: "Rússia", pwr: 96, army: 1320000, air: 4250, navy: 598, tanks: 12500, nuke: 5580, carrier: 1, lat: 60, lng: 100, doc: "Blindados pesados e tríade nuclear." },
        brazil: { n: "Brasil", pwr: 75, army: 360000, air: 665, navy: 112, tanks: 433, nuke: 0, carrier: 1, lat: -10, lng: -55, doc: "Guerra de selva e resistência assimétrica." },
        israel: { n: "Israel", pwr: 94, army: 170000, air: 612, navy: 67, tanks: 2200, nuke: 90, carrier: 0, lat: 31, lng: 35, doc: "Inteligência e precisão cirúrgica aérea." },
        north_korea: { n: "Coreia do Norte", pwr: 81, army: 1280000, air: 950, navy: 450, tanks: 6600, nuke: 50, carrier: 0, lat: 40, lng: 127, doc: "Artilharia massiva e fortificação subterrânea." },
        ukraine: { n: "Ucrânia", pwr: 83, army: 900000, air: 320, navy: 35, tanks: 2500, nuke: 0, carrier: 0, lat: 48, lng: 31, doc: "Guerra de drones e defesa móvel." },
        poland: { n: "Polônia", pwr: 85, army: 160000, air: 450, navy: 40, tanks: 1000, nuke: 0, carrier: 0, lat: 52, lng: 19, doc: "Força blindada da OTAN e defesa de fronteira." },
        south_africa: { n: "África do Sul", pwr: 68, army: 72000, air: 220, navy: 30, tanks: 195, nuke: 0, carrier: 0, lat: -30, lng: 22, doc: "Potência regional e blindados leves de patrulha." },
        nigeria: { n: "Nigéria", pwr: 65, army: 223000, air: 140, navy: 75, tanks: 350, nuke: 0, carrier: 0, lat: 9, lng: 8, doc: "Contrainsurgência e liderança na África Ocidental." },
        pakistan: { n: "Paquistão", pwr: 88, army: 650000, air: 1400, navy: 100, tanks: 3700, nuke: 170, carrier: 0, lat: 30, lng: 69, doc: "Guerra de montanha e capacidade nuclear tática." }
    };

    let world;
    function initGlobe() {
        world = Globe()(document.getElementById('globeViz'))
            .globeImageUrl('//unpkg.com/three-globe/example/img/earth-night.jpg')
            .backgroundColor('rgba(0,0,0,0)').showAtmosphere(true).atmosphereColor('#00f2ff');
        
        const s1 = document.getElementById('p1'); const s2 = document.getElementById('p2');
        Object.keys(db).sort((a,b) => db[a].n.localeCompare(db[b].n)).forEach(k => {
            s1.add(new Option(db[k].n, k)); s2.add(new Option(db[k].n, k));
        });
    }

    function focusCountry(id) {
        const c = db[document.getElementById(id).value];
        world.pointOfView({ lat: c.lat, lng: c.lng, altitude: 2.2 }, 1500);
    }

    function runSim() {
        playMusic(); // Ativa a percussão de guerra
        const a = db[document.getElementById('p1').value];
        const b = db[document.getElementById('p2').value];
        const out = document.getElementById('ai-output');

        const probA = Math.round((a.pwr / (a.pwr + b.pwr)) * 100);
        const probB = 100 - probA;
        const winner = probA > probB ? a : b;

        out.innerHTML = `
            <div class="mb-4 text-center border-b border-red-900 pb-2 font-black text-red-500 tracking-widest">TRANSMISSÃO DE COMBATE</div>
            <div class="flex justify-between text-[10px] uppercase font-black text-white mb-6">
                <span>${a.n} (AGRESSOR)</span> <span class="text-red-500">⚔️</span> <span>${b.n} (ALVO)</span>
            </div>
            
            ${renderBar("INFANTARIA ATIVA", a.army, b.army)}
            ${renderBar("FORÇA AÉREA", a.air, b.air)}
            ${renderBar("DIVISÕES BLINDADAS", a.tanks, b.tanks)}
            ${renderBar("PROJEÇÃO NAVAL", a.carrier, b.carrier)}

            <div class="mt-8 bg-green-950/20 p-6 border border-green-500/50">
                <p class="text-[8px] uppercase tracking-[5px] text-green-400">Vencedor Projetado pela IA:</p>
                <h2 class="win-tag">${winner.n}</h2>
                <p class="text-[14px] font-bold text-white">${probA > probB ? probA : probB}% DE EFICIÊNCIA</p>
                <div class="mt-4 p-2 bg-black/50 text-[9px] border-l-2 border-red-500">
                    <span class="text-red-500 font-bold">ANÁLISE DO COMANDO:</span> 
                    O conflito seria vencido através da ${winner.doc} 
                    ${a.nuke > 0 || b.nuke > 0 ? '<br><b class="text-yellow-500">DETECÇÃO NUCLEAR:</b> O uso de ogivas é provável após 48h de cerco.' : ''}
                </div>
            </div>
        `;
    }

    function renderBar(label, valA, valB) {
        const max = Math.max(valA, valB, 1);
        return `
            <div class="mb-4">
                <div class="flex justify-between text-[7px] text-white opacity-80 mb-1">
                    <span>${valA.toLocaleString()}</span> <span>${label}</span> <span>${valB.toLocaleString()}</span>
                </div>
                <div class="bar-wrap">
                    <div class="bar-a" style="width: ${(valA/max)*100}%"></div>
                    <div class="bar-b" style="width: ${(valB/max)*100}%"></div>
                </div>
            </div>
        `;
    }

    window.onload = initGlobe;
    setInterval(() => { document.getElementById('clock').innerText = new Date().toLocaleTimeString(); }, 1000);
</script>
</body>
</html>
