<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>STRATOS | TOTAL DOMINATION</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="//unpkg.com/globe.gl"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=JetBrains+Mono:wght@300;800&display=swap" rel="stylesheet">
    <style>
        :root { --neon: #00f2ff; --danger: #ff003c; --bg: #000507; }
        body { background: var(--bg); color: var(--neon); font-family: 'JetBrains Mono', monospace; overflow: hidden; margin: 0; }
        
        /* TELA INICIAL (RESTORED) */
        #login-screen {
            position: fixed; inset: 0; z-index: 1000; background: var(--bg);
            display: flex; flex-direction: column; align-items: center; justify-content: center;
        }
        .radar {
            width: 200px; height: 200px; border: 2px solid var(--neon); border-radius: 50%;
            position: relative; margin-bottom: 30px; overflow: hidden;
        }
        .radar::after {
            content: ''; position: absolute; inset: 0;
            background: conic-gradient(from 0deg, transparent, rgba(0, 242, 255, 0.4));
            animation: rotate 3s linear infinite;
        }
        @keyframes rotate { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }

        /* INTERFACE PRINCIPAL */
        #globeViz { position: absolute; top: 0; z-index: 1; opacity: 0.25; }
        .hud { position: relative; z-index: 100; height: 100vh; display: flex; flex-direction: column; padding: 10px; pointer-events: none; }
        .interactive { pointer-events: auto !important; }
        .terminal { background: rgba(0, 8, 12, 0.96); border: 1px solid rgba(0, 242, 255, 0.3); backdrop-filter: blur(10px); }
        .bar-wrap { height: 6px; background: rgba(255,255,255,0.05); margin: 4px 0 10px 0; display: flex; }
        .bar-a { height: 100%; background: var(--neon); box-shadow: 0 0 10px var(--neon); transition: width 1.2s; }
        .bar-b { height: 100%; background: var(--danger); box-shadow: 0 0 10px var(--danger); transition: width 1.2s; }
        .ai-report { height: 420px; overflow-y: auto; padding: 15px; font-size: 9px; scrollbar-width: none; border-left: 2px solid var(--neon); }
        select { background: #000; border: 1px solid var(--neon); color: white; padding: 8px; width: 100%; font-size: 11px; }
        .win-tag { font-family: 'Orbitron'; font-size: 26px; color: #4ade80; text-shadow: 0 0 15px #4ade80; font-weight: 900; }
        .hidden { display: none !important; }
    </style>
</head>
<body>

<div id="login-screen">
    <div class="radar"></div>
    <h1 class="font-orbitron text-white text-xl font-black mb-2 tracking-[10px]">STRATOS</h1>
    <p class="text-[8px] mb-8 text-cyan-500 font-bold uppercase tracking-widest">SISTEMA DE DEFESA GLOBAL v2026</p>
    <button onclick="unlock()" class="interactive border-2 border-cyan-500 px-12 py-3 font-orbitron font-black text-cyan-500 hover:bg-cyan-500 hover:text-black transition-all">INICIAR PROTOCOLO</button>
</div>

<div id="war-room" class="hidden">
    <div id="globeViz"></div>
    <div class="hud">
        <header class="interactive terminal p-4 flex justify-between items-center border-b border-cyan-500">
            <div>
                <h1 class="font-orbitron text-[10px] font-black tracking-widest text-white">STRATOS // WAR COMMANDER</h1>
                <p id="system-status" class="text-[6px] text-cyan-400 uppercase">Status: Online | Operacional</p>
            </div>
            <div id="clock" class="text-xs font-bold">00:00:00</div>
        </header>

        <main class="flex-1 flex flex-col justify-end">
            <div class="interactive terminal p-6 w-full max-w-6xl mx-auto border-t-2 border-cyan-500">
                <div class="grid grid-cols-2 gap-4 mb-4">
                    <select id="p1" onchange="focusCountry('p1')"></select>
                    <select id="p2" onchange="focusCountry('p2')"></select>
                </div>

                <div class="ai-report" id="ai-output">
                    <p class="opacity-40 text-center mt-32 font-bold uppercase tracking-widest">> AGUARDANDO COMANDO ESTRATÉGICO...</p>
                </div>

                <button class="w-full bg-red-700 hover:bg-white hover:text-black text-white font-orbitron py-4 mt-2 interactive transition-all font-black tracking-[5px]" onclick="runSim()">INICIAR GUERRA TOTAL</button>
            </div>
        </main>
    </div>
</div>

<script>
    const audioCtx = new (window.AudioContext || window.webkitAudioContext)();
    
    function unlock() {
        document.getElementById('login-screen').classList.add('hidden');
        document.getElementById('war-room').classList.remove('hidden');
        initGlobe();
    }

    function playWarDrum(time) {
        const osc = audioCtx.createOscillator();
        const gain = audioCtx.createGain();
        osc.type = 'sine';
        osc.frequency.setValueAtTime(120, time);
        osc.frequency.exponentialRampToValueAtTime(0.01, time + 0.6);
        gain.gain.setValueAtTime(0.4, time);
        gain.gain.exponentialRampToValueAtTime(0.01, time + 0.6);
        osc.connect(gain); gain.connect(audioCtx.destination);
        osc.start(time); osc.stop(time + 0.6);
    }

    const db = {
        // AMÉRICAS
        usa: { n: "EUA", pwr: 100, army: 1390000, res: 442000, air: 13200, navy: 484, tanks: 5500, nuke: 5044, carrier: 11, bud: "$850B", geo: "Isolamento Continental", lat: 38, lng: -97 },
        brazil: { n: "Brasil", pwr: 75, army: 360000, res: 1340000, air: 665, navy: 112, tanks: 433, nuke: 0, carrier: 1, bud: "$22B", geo: "Coração da Amazônia", lat: -10, lng: -55 },
        mexico: { n: "México", pwr: 68, army: 270000, res: 80000, air: 480, navy: 190, tanks: 0, nuke: 0, carrier: 0, bud: "$8.5B", geo: "Portão da América Central", lat: 23, lng: -102 },
        venezuela: { n: "Venezuela", pwr: 64, army: 123000, res: 220000, air: 260, navy: 50, tanks: 350, nuke: 0, carrier: 0, bud: "$0.8B", geo: "Maiores Reservas de Petróleo", lat: 7, lng: -66 },
        argentina: { n: "Argentina", pwr: 62, army: 83000, air: 220, navy: 42, tanks: 230, nuke: 0, carrier: 0, bud: "$3B", geo: "Pampas e Patagônia", lat: -34, lng: -64 },
        
        // EUROPA
        russia: { n: "Rússia", pwr: 96, army: 1320000, res: 2000000, air: 4250, navy: 598, tanks: 12500, nuke: 5580, carrier: 1, bud: "$100B", geo: "Imensidão da Estepe", lat: 60, lng: 100 },
        germany: { n: "Alemanha", pwr: 88, army: 181000, res: 34000, air: 601, navy: 80, tanks: 266, nuke: 0, carrier: 0, bud: "$55B", geo: "Eixo Logístico Europeu", lat: 51, lng: 10 },
        france: { n: "França", pwr: 90, army: 205000, air: 1000, navy: 120, tanks: 222, nuke: 290, carrier: 1, bud: "$53B", geo: "Projeção Euro-Africana", lat: 46, lng: 2 },
        ukraine: { n: "Ucrânia", pwr: 84, army: 900000, res: 1000000, air: 320, navy: 35, tanks: 2500, nuke: 0, carrier: 0, bud: "$40B", geo: "Portão da Europa Oriental", lat: 48, lng: 31 },
        sweden: { n: "Suécia", pwr: 82, army: 25000, res: 30000, air: 205, navy: 300, tanks: 120, nuke: 0, carrier: 0, bud: "$8B", geo: "Fortaleza Escandinava", lat: 60, lng: 18 },
        portugal: { n: "Portugal", pwr: 60, army: 27000, res: 200000, air: 100, navy: 40, tanks: 130, nuke: 0, carrier: 0, bud: "$2.5B", geo: "Sentinela do Atlântico", lat: 39, lng: -8 },
        greece: { n: "Grécia", pwr: 78, army: 142000, res: 220000, air: 570, navy: 120, tanks: 1300, nuke: 0, carrier: 0, bud: "$8B", geo: "Defensiva do Mar Egeu", lat: 39, lng: 21 },

        // ÁSIA / ORIENTE MÉDIO
        china: { n: "China", pwr: 98, army: 2035000, res: 510000, air: 3300, navy: 730, tanks: 4950, nuke: 500, carrier: 3, bud: "$230B", geo: "A Muralha Econômica", lat: 35, lng: 103 },
        israel: { n: "Israel", pwr: 94, army: 170000, res: 465000, air: 612, navy: 67, tanks: 2200, nuke: 90, carrier: 0, bud: "$24B", geo: "Soberania em solo hostil", lat: 31, lng: 35 },
        japan: { n: "Japão", pwr: 91, army: 247000, res: 56000, air: 1450, navy: 155, tanks: 580, nuke: 0, carrier: 4, bud: "$50B", geo: "Ilha de Tecnologia", lat: 36, lng: 138 },
        iran: { n: "Irã", pwr: 82, army: 610000, res: 350000, air: 540, navy: 100, tanks: 4000, nuke: 0, carrier: 0, bud: "$25B", geo: "Fortaleza de Montanhas", lat: 32, lng: 53 },
        pakistan: { n: "Paquistão", pwr: 87, army: 650000, air: 1400, navy: 100, tanks: 3700, nuke: 170, carrier: 0, bud: "$10B", geo: "Corredor Nuclear", lat: 30, lng: 69 }
    };

    let world;
    function initGlobe() {
        world = Globe()(document.getElementById('globeViz'))
            .globeImageUrl('//unpkg.com/three-globe/example/img/earth-night.jpg')
            .backgroundColor('rgba(0,0,0,0)').showAtmosphere(true).atmosphereColor('#00f2ff');
        
        const s1 = document.getElementById('p1'); const s2 = document.getElementById('p2');
        Object.keys(db).sort((a,b) => db[a].n.localeCompare(db[b].n)).forEach(k => {
            s1.add(new Option(db[k].n, k)); s2.add(new Option(db[k].n, k));
        });
    }

    function focusCountry(id) {
        const c = db[document.getElementById(id).value];
        world.pointOfView({ lat: c.lat, lng: c.lng, altitude: 2.2 }, 1500);
    }

    function runSim() {
        const now = audioCtx.currentTime;
        for(let i=0; i<4; i++) playWarDrum(now + i*0.8);

        const a = db[document.getElementById('p1').value];
        const b = db[document.getElementById('p2').value];
        const out = document.getElementById('ai-output');

        const probA = Math.round((a.pwr / (a.pwr + b.pwr)) * 100);
        const probB = 100 - probA;
        const winner = probA > probB ? a : b;

        out.innerHTML = `
            <div class="mb-4 text-center border-b border-red-900 pb-2 font-black text-red-500 text-[12px]">INFORME ESTRATÉGICO TOTAL</div>
            <div class="grid grid-cols-2 gap-4 text-white font-bold mb-6">
                <div class="border-l-2 border-cyan-500 pl-2">
                    <p class="text-cyan-500 text-[8px]">PIB MILITAR: ${a.bud}</p>
                    <p class="text-[10px] uppercase">${a.n}</p>
                    <p class="text-[7px] opacity-60">RESERVA: ${a.res.toLocaleString()}</p>
                </div>
                <div class="border-r-2 border-red-500 pr-2 text-right">
                    <p class="text-red-500 text-[8px]">PIB MILITAR: ${b.bud}</p>
                    <p class="text-[10px] uppercase">${b.n}</p>
                    <p class="text-[7px] opacity-60">RESERVA: ${b.res.toLocaleString()}</p>
                </div>
            </div>
            
            ${renderBar("SOLDIERS", a.army, b.army)}
            ${renderBar("AIRCRAFT", a.air, b.air)}
            ${renderBar("TANKS", a.tanks, b.tanks)}
            ${renderBar("NAVY POWER", a.navy, b.navy)}
            ${renderBar("NUKES", a.nuke, b.nuke)}

            <div class="mt-6 p-4 bg-white/5 border border-white/10">
                <h2 class="win-tag text-center mb-2">${winner.n}</h2>
                <div class="flex justify-between items-center mb-4">
                    <span class="text-[14px] font-black">${probA > probB ? probA : probB}% DE DOMINÂNCIA</span>
                    <span class="text-red-500 animate-pulse text-[8px]">BAIXAS ESTIMADAS: ${(Math.random() * 5).toFixed(1)}M</span>
                </div>
                <p class="text-[9px] text-gray-300 leading-relaxed">
                    <b>PONTO ESTRATÉGICO:</b> ${winner.geo}.<br>
                    <b>RELATÓRIO:</b> A vitória de ${winner.n} é sustentada pela superioridade logística e controle territorial. 
                    ${a.nuke > 0 || b.nuke > 0 ? '<span class="text-red-500">ALERTA NUCLEAR ATIVO.</span>' : ''}
                </p>
            </div>
        `;
    }

    function renderBar(label, valA, valB) {
        const max = Math.max(valA, valB, 1);
        return `
            <div class="mb-3">
                <div class="flex justify-between text-[7px] text-white opacity-80 mb-1">
                    <span>${valA.toLocaleString()}</span> <span>${label}</span> <span>${valB.toLocaleString()}</span>
                </div>
                <div class="bar-wrap">
                    <div class="bar-a" style="width: ${(valA/max)*100}%"></div>
                    <div class="bar-b" style="width: ${(valB/max)*100}%"></div>
                </div>
            </div>
        `;
    }

    setInterval(() => { document.getElementById('clock').innerText = new Date().toLocaleTimeString(); }, 1000);
</script>
</body>
</html>
