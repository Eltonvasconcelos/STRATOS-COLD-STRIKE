<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>STRATOS | WAR COMMAND</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="//unpkg.com/globe.gl"></script>
    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;900&family=JetBrains+Mono:wght@300;800&display=swap" rel="stylesheet">
    <style>
        :root { --neon: #00f2ff; --danger: #ff003c; --bg: #000507; --win: #4ade80; }
        body { background: var(--bg); color: var(--neon); font-family: 'JetBrains Mono', monospace; overflow: hidden; margin: 0; }
        #globeViz { position: absolute; top: 0; z-index: 1; opacity: 0.25; }
        .hud { position: relative; z-index: 100; height: 100vh; display: flex; flex-direction: column; padding: 10px; pointer-events: none; }
        .interactive { pointer-events: auto !important; }
        .terminal { background: rgba(0, 8, 12, 0.92); border: 1px solid rgba(0, 242, 255, 0.3); backdrop-filter: blur(8px); }
        
        /* BARRAS DE COMPARAÇÃO DINÂMICAS */
        .bar-container { height: 6px; background: rgba(255,255,255,0.05); border-radius: 3px; overflow: hidden; display: flex; margin: 4px 0 12px 0; }
        .bar-a { height: 100%; background: var(--neon); box-shadow: 0 0 10px var(--neon); transition: width 1s ease-in-out; }
        .bar-b { height: 100%; background: var(--danger); box-shadow: 0 0 10px var(--danger); transition: width 1s ease-in-out; }

        .ai-report { font-size: 10px; color: #fff; height: 380px; overflow-y: auto; padding: 15px; }
        .win-tag { font-family: 'Orbitron'; font-size: 28px; font-weight: 900; color: var(--win); text-shadow: 0 0 15px var(--win); }
        
        select { background: #00151a; border: 1px solid #004d55; color: white; padding: 10px; border-radius: 0; appearance: none; }
        .btn-strike { background: var(--danger); color: white; font-family: 'Orbitron'; font-weight: 900; padding: 16px; width: 100%; letter-spacing: 2px; }
    </style>
</head>
<body>

<div id="main-system">
    <div id="globeViz"></div>
    <div class="hud">
        <header class="interactive terminal p-4 flex justify-between border-b-2 border-cyan-500">
            <div>
                <h2 class="font-orbitron text-xs font-black tracking-widest">STRATOS // COMMAND & CONQUER</h2>
                <div class="flex items-center gap-2 mt-1">
                    <span class="w-2 h-2 bg-red-600 rounded-full animate-ping"></span>
                    <span class="text-[7px] text-red-500 font-bold uppercase">Live Intelligence Feed</span>
                </div>
            </div>
            <div id="clock" class="text-sm font-bold opacity-70">00:00:00</div>
        </header>

        <main class="flex-1 flex flex-col justify-end">
            <div class="interactive terminal p-6 w-full max-w-5xl mx-auto border-t-2 border-cyan-500">
                <div class="grid grid-cols-2 gap-6 mb-6">
                    <div class="flex flex-col">
                        <label class="text-[8px] mb-1 text-cyan-400">AGRESSOR ESTABELECIDO</label>
                        <select id="p1" onchange="focusCountry('p1')"></select>
                    </div>
                    <div class="flex flex-col">
                        <label class="text-[8px] mb-1 text-red-400">ALVO ESTRATÉGICO</label>
                        <select id="p2" onchange="focusCountry('p2')"></select>
                    </div>
                </div>

                <div class="ai-report" id="ai-output">
                    <div class="flex flex-col items-center justify-center h-full opacity-30">
                        <p class="text-[10px]">> AGUARDANDO SELEÇÃO DE COORDENADAS PARA CÁLCULO BALÍSTICO...</p>
                    </div>
                </div>

                <button class="btn-strike interactive mt-4" onclick="runWarSim()">INICIAR ANÁLISE DE COMBATE</button>
            </div>
        </main>
    </div>
</div>

<script>
    const db = {
        usa: { n: "EUA", soldiers: 1320000, air: 13209, tanks: 5500, navy: 484, nuke: 5044, pwr: 100, lat: 37, lng: -95, tactic: "Superioridade total e guerra centrada em rede." },
        brazil: { n: "BRASIL", soldiers: 360000, air: 665, tanks: 433, navy: 112, nuke: 0, pwr: 74, lat: -14, lng: -51, tactic: "Defesa elástica e soberania amazônica." },
        russia: { n: "RÚSSIA", soldiers: 1320000, air: 4255, tanks: 12500, navy: 598, nuke: 5580, pwr: 95, lat: 61, lng: 105, tactic: "Atrito de artilharia e dissuasão nuclear." },
        china: { n: "CHINA", soldiers: 2035000, air: 3304, tanks: 4950, navy: 730, nuke: 500, pwr: 98, lat: 35, lng: 103, tactic: "Guerra de saturação e mísseis DF-41." },
        israel: { n: "ISRAEL", soldiers: 170000, air: 612, tanks: 2200, navy: 67, nuke: 90, pwr: 92, lat: 31, lng: 34, tactic: "Golpes cirúrgicos e inteligência Mossad." }
    };

    let world;

    function initGlobe() {
        world = Globe()(document.getElementById('globeViz'))
            .globeImageUrl('//unpkg.com/three-globe/example/img/earth-night.jpg')
            .backgroundColor('rgba(0,0,0,0)').showAtmosphere(true).atmosphereColor('#00f2ff');
        populate();
    }

    function populate() {
        const s1 = document.getElementById('p1'); const s2 = document.getElementById('p2');
        Object.keys(db).forEach(k => {
            s1.add(new Option(db[k].n, k)); s2.add(new Option(db[k].n, k));
        });
    }

    function focusCountry(id) {
        const val = document.getElementById(id).value;
        const c = db[val];
        world.pointOfView({ lat: c.lat, lng: c.lng, altitude: 2.2 }, 1500);
    }

    function runWarSim() {
        const a = db[document.getElementById('p1').value];
        const b = db[document.getElementById('p2').value];
        const out = document.getElementById('ai-output');
        
        const total = a.pwr + b.pwr;
        const probA = Math.round((a.pwr / total) * 100);
        const probB = 100 - probA;
        const winner = probA > probB ? a : b;
        const winPct = probA > probB ? probA : probB;

        const categories = [
            { lab: "Contingente Militar", valA: a.soldiers, valB: b.soldiers, max: 2035000 },
            { lab: "Poder de Fogo Aéreo", valA: a.air, valB: b.air, max: 13209 },
            { lab: "Divisões de Blindados", valA: a.tanks, valB: b.tanks, max: 12500 },
            { lab: "Arsenal Nuclear", valA: a.nuke, valB: b.nuke, max: 5580 }
        ];

        let html = `<div class="mb-6"><h3 class="text-center font-bold text-xs border-b border-cyan-900 pb-2">RELATÓRIO DE ATRITO DIRETO</h3></div>`;
        
        categories.forEach(c => {
            const pA = (c.valA / c.max) * 100;
            const pB = (c.valB / c.max) * 100;
            html += `
                <div class="mb-4">
                    <div class="flex justify-between text-[8px] uppercase font-bold">
                        <span>${a.n}: ${c.valA.toLocaleString()}</span>
                        <span class="text-cyan-400">${c.lab}</span>
                        <span>${b.n}: ${c.valB.toLocaleString()}</span>
                    </div>
                    <div class="bar-container">
                        <div class="bar-a" style="width: ${pA}%"></div>
                        <div class="bar-b" style="width: ${pB}%"></div>
                    </div>
                </div>
            `;
        });

        html += `
            <div class="bg-red-950/20 p-6 border border-red-900 mt-6 text-center">
                <p class="text-[9px] uppercase tracking-[4px] mb-2">Vencedor Provável</p>
                <span class="win-tag">${winner.n}</span>
                <p class="text-[20px] font-bold text-white mt-1">${winPct}% de Dominância</p>
                <p class="text-[9px] mt-4 opacity-70 italic">"Análise tática sugere que a vitória será decidida via ${winner.tactic}"</p>
            </div>
        `;
        
        out.innerHTML = html;
    }

    window.onload = initGlobe;
    setInterval(() => { document.getElementById('clock').innerText = new Date().toLocaleTimeString(); }, 1000);
</script>
</body>
</html>

